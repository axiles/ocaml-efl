<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Elm_connect.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Ecore" rel="Chapter" href="Ecore.html">
<link title="Ecore_animator" rel="Chapter" href="Ecore_animator.html">
<link title="Ecore_timer" rel="Chapter" href="Ecore_timer.html">
<link title="Evas" rel="Chapter" href="Evas.html">
<link title="Evas_event" rel="Chapter" href="Evas_event.html">
<link title="Evas_font" rel="Chapter" href="Evas_font.html">
<link title="Evas_map" rel="Chapter" href="Evas_map.html">
<link title="Evas_object" rel="Chapter" href="Evas_object.html">
<link title="Evas_object_smart" rel="Chapter" href="Evas_object_smart.html">
<link title="Ecore_evas" rel="Chapter" href="Ecore_evas.html">
<link title="Ethumb" rel="Chapter" href="Ethumb.html">
<link title="Edje" rel="Chapter" href="Edje.html">
<link title="Elm" rel="Chapter" href="Elm.html">
<link title="Elm_font" rel="Chapter" href="Elm_font.html">
<link title="Elm_config" rel="Chapter" href="Elm_config.html">
<link title="Elm_object" rel="Chapter" href="Elm_object.html">
<link title="Elm_gen" rel="Chapter" href="Elm_gen.html">
<link title="Elm_layout" rel="Chapter" href="Elm_layout.html">
<link title="Elm_ctxpopup" rel="Chapter" href="Elm_ctxpopup.html">
<link title="Elm_fileselector" rel="Chapter" href="Elm_fileselector.html">
<link title="Elm_fileselector_button" rel="Chapter" href="Elm_fileselector_button.html">
<link title="Elm_fileselector_entry" rel="Chapter" href="Elm_fileselector_entry.html">
<link title="Elm_hoversel" rel="Chapter" href="Elm_hoversel.html">
<link title="Elm_multibuttonentry" rel="Chapter" href="Elm_multibuttonentry.html">
<link title="Elm_naviframe" rel="Chapter" href="Elm_naviframe.html">
<link title="Elm_popup" rel="Chapter" href="Elm_popup.html">
<link title="Elm_app" rel="Chapter" href="Elm_app.html">
<link title="Elm_bg" rel="Chapter" href="Elm_bg.html">
<link title="Elm_box" rel="Chapter" href="Elm_box.html">
<link title="Elm_bubble" rel="Chapter" href="Elm_bubble.html">
<link title="Elm_button" rel="Chapter" href="Elm_button.html">
<link title="Elm_calendar" rel="Chapter" href="Elm_calendar.html">
<link title="Elm_check" rel="Chapter" href="Elm_check.html">
<link title="Elm_clock" rel="Chapter" href="Elm_clock.html">
<link title="Elm_colorselector" rel="Chapter" href="Elm_colorselector.html">
<link title="Elm_conformant" rel="Chapter" href="Elm_conformant.html">
<link title="Elm_datetime" rel="Chapter" href="Elm_datetime.html">
<link title="Elm_dayselector" rel="Chapter" href="Elm_dayselector.html">
<link title="Elm_diskselector" rel="Chapter" href="Elm_diskselector.html">
<link title="Elm_entry" rel="Chapter" href="Elm_entry.html">
<link title="Elm_flip" rel="Chapter" href="Elm_flip.html">
<link title="Elm_flipselector" rel="Chapter" href="Elm_flipselector.html">
<link title="Elm_frame" rel="Chapter" href="Elm_frame.html">
<link title="Elm_gengrid" rel="Chapter" href="Elm_gengrid.html">
<link title="Elm_genlist" rel="Chapter" href="Elm_genlist.html">
<link title="Elm_gesture_layer" rel="Chapter" href="Elm_gesture_layer.html">
<link title="Elm_glview" rel="Chapter" href="Elm_glview.html">
<link title="Elm_grid" rel="Chapter" href="Elm_grid.html">
<link title="Elm_hover" rel="Chapter" href="Elm_hover.html">
<link title="Elm_icon" rel="Chapter" href="Elm_icon.html">
<link title="Elm_image" rel="Chapter" href="Elm_image.html">
<link title="Elm_index" rel="Chapter" href="Elm_index.html">
<link title="Elm_label" rel="Chapter" href="Elm_label.html">
<link title="Elm_list" rel="Chapter" href="Elm_list.html">
<link title="Elm_map" rel="Chapter" href="Elm_map.html">
<link title="Elm_mapbuf" rel="Chapter" href="Elm_mapbuf.html">
<link title="Elm_menu" rel="Chapter" href="Elm_menu.html">
<link title="Elm_notify" rel="Chapter" href="Elm_notify.html">
<link title="Elm_panel" rel="Chapter" href="Elm_panel.html">
<link title="Elm_panes" rel="Chapter" href="Elm_panes.html">
<link title="Elm_photo" rel="Chapter" href="Elm_photo.html">
<link title="Elm_photocam" rel="Chapter" href="Elm_photocam.html">
<link title="Elm_plug" rel="Chapter" href="Elm_plug.html">
<link title="Elm_progressbar" rel="Chapter" href="Elm_progressbar.html">
<link title="Elm_radio" rel="Chapter" href="Elm_radio.html">
<link title="Elm_route" rel="Chapter" href="Elm_route.html">
<link title="Elm_scroller" rel="Chapter" href="Elm_scroller.html">
<link title="Elm_segment_control" rel="Chapter" href="Elm_segment_control.html">
<link title="Elm_separator" rel="Chapter" href="Elm_separator.html">
<link title="Elm_slider" rel="Chapter" href="Elm_slider.html">
<link title="Elm_slideshow" rel="Chapter" href="Elm_slideshow.html">
<link title="Elm_spinner" rel="Chapter" href="Elm_spinner.html">
<link title="Elm_table" rel="Chapter" href="Elm_table.html">
<link title="Elm_theme" rel="Chapter" href="Elm_theme.html">
<link title="Elm_thumb" rel="Chapter" href="Elm_thumb.html">
<link title="Elm_toolbar" rel="Chapter" href="Elm_toolbar.html">
<link title="Elm_transit" rel="Chapter" href="Elm_transit.html">
<link title="Elm_web" rel="Chapter" href="Elm_web.html">
<link title="Elm_win" rel="Chapter" href="Elm_win.html">
<link title="Elm_inwin" rel="Chapter" href="Elm_inwin.html">
<link title="Elm_win_inwin" rel="Chapter" href="Elm_win_inwin.html">
<link title="Elm_actionslider" rel="Chapter" href="Elm_actionslider.html">
<link title="Elm_video" rel="Chapter" href="Elm_video.html">
<link title="Elm_sig" rel="Chapter" href="Elm_sig.html">
<link title="Elm_toolbox" rel="Chapter" href="Elm_toolbox.html">
<link title="Elm_connect" rel="Chapter" href="Elm_connect.html">
<link title="Start" rel="Chapter" href="Start.html"><title>OCaml EFL Documentation : Start</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Elm_connect.html" title="Elm_connect">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Start</h1>
To write an Elementary app in Ocaml, you can get started with the following:
<p>

<pre class="codepre"><code class="code"><span class="keyword">open</span> <span class="constructor">Efl</span>

<span class="keyword">let</span> () =
  <span class="constructor">Elm</span>.init ();
  
  <span class="comment">(* create window(s) here and do any application init *)</span>

  <span class="constructor">Elm</span>.run (); <span class="comment">(* run main loop *)</span>
  <span class="constructor">Elm</span>.shutdown (); <span class="comment">(* after mainloop finished running, shutdown *)</span>
</code></pre>
<p>

To build this program you need the ocamlfind package efl.
<p>

Now let's actually create an interactive "Hello World" gui that you can click
the ok button to exit. It's more code because this now does something much more
significant, but it's still very simple:
<p>

<pre class="codepre"><code class="code"><span class="keyword">open</span> <span class="constructor">Efl</span>

<span class="keyword">let</span> on_done obj =
  <span class="constructor">Elm</span>.exit () <span class="comment">(* quit mainloop (Elm.run function will return *)</span>

<span class="keyword">let</span> () =
  <span class="constructor">Elm</span>.init ();

  <span class="comment">(* new window - do the usual and give it a name (hello) and a title (Hello)*)</span>
  <span class="keyword">let</span> win = <span class="constructor">Elm_win</span>.util_standard_add <span class="string">"hello"</span> <span class="string">"Hello"</span> <span class="keyword">in</span>
  
  <span class="comment">(* when the user clicks "close" on a window there is a request to delete *)</span>
  <span class="constructor">Elm_connect</span>.<span class="constructor">Win</span>.delete_request win on_done;

  <span class="comment">(* add a box object - default is vertical. a box holds children in a row
   * either horizontally or vertically. nothing more. *)</span>
  <span class="keyword">let</span> box = <span class="constructor">Elm_box</span>.add win <span class="keyword">in</span>
  
  <span class="comment">(* make the box horizontal *)</span>
  <span class="constructor">Elm_box</span>.horizontal_set box <span class="keyword">true</span>;

  <span class="comment">(* add object as a resize object for the window (controls window minimum
   * size as well as gets resized if window is resized) *)</span>
  <span class="constructor">Elm_win</span>.resize_object_add win box;

  <span class="constructor">Evas_object</span>.show box;

  <span class="comment">(* add a label widget, set the text and put it in the pad frame *)</span>
  <span class="keyword">let</span> lab = <span class="constructor">Elm_label</span>.add win <span class="keyword">in</span>

  <span class="comment">(* set default text of the label *)</span>
  <span class="constructor">Elm_object</span>.text_set lab <span class="string">"Hello out there world!"</span>;

  <span class="comment">(* pack the label at the end of the box *)</span>
  <span class="constructor">Elm_box</span>.pack_end box lab;

  <span class="constructor">Evas_object</span>.show lab;

  <span class="comment">(* add an ok button *)</span>
  <span class="keyword">let</span> btn = <span class="constructor">Elm_button</span>.add win <span class="keyword">in</span>

  <span class="comment">(* set default text of button to "OK" *)</span>
  <span class="constructor">Elm_object</span>.text_set btn <span class="string">"Ok"</span>;

  <span class="comment">(* pack the button at the end of the box *)</span>
  <span class="constructor">Elm_box</span>.pack_end box btn;

  <span class="constructor">Evas_object</span>.show btn;

  <span class="comment">(* call on_done when the button is clicked *)</span>
  <span class="constructor">Elm_connect</span>.<span class="constructor">Button</span>.clicked btn on_done;

  <span class="comment">(* now we are done, show the window *)</span>
  <span class="constructor">Evas_object</span>.show win;

  <span class="comment">(* run the mainloop and process events and callbacks *)</span>
  <span class="constructor">Elm</span>.run ();

  <span class="constructor">Elm</span>.shutdown ()
</code></pre>
<p>

It is also possible to use addx functions instead:
<p>

<pre class="codepre"><code class="code"><span class="keyword">open</span> <span class="constructor">Efl</span>

<span class="keyword">let</span> on_done obj = <span class="constructor">Elm</span>.exit ()

<span class="keyword">let</span> () =
  <span class="constructor">Elm</span>.init ();
  <span class="keyword">let</span> win = <span class="constructor">Elm_win</span>.addx ~title:<span class="string">"Hello"</span> <span class="string">"hello"</span> <span class="keyword">in</span>
  <span class="constructor">Elm_connect</span>.<span class="constructor">Win</span>.delete_request win on_done;

  <span class="keyword">let</span> box = <span class="constructor">Elm_box</span>.addx ~win win <span class="keyword">in</span>
  <span class="constructor">Elm_box</span>.horizontal_set box <span class="keyword">true</span>;

  ignore (<span class="constructor">Elm_label</span>.addx ~text:<span class="string">"Hello out there World!"</span> ~box win);

  <span class="keyword">let</span> btn = <span class="constructor">Elm_button</span>.addx ~text:<span class="string">"Ok"</span> ~box win <span class="keyword">in</span>
  <span class="constructor">Elm_connect</span>.<span class="constructor">Button</span>.clicked btn on_done;

  <span class="constructor">Evas_object</span>.show win;
  <span class="constructor">Elm</span>.run ();
  <span class="constructor">Elm</span>.shutdown ()
</code></pre>
<p>

<br>
</body></html>